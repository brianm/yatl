---
title: Auto-install bt-tasks skill on init when Claude Code detected
id: yn5m9q55
created: 2025-11-27T03:33:45Z
updated: 2025-11-27T03:33:45Z
author: Brian McCallister
priority: medium
tags:
- feature
- claude-integration
---

On `bt init`, detect if Claude Code is in use and auto-install the bt-tasks skill.

## Detection
Check for Claude Code indicators:
- `.claude/` directory exists
- `CLAUDE.md` file exists
- `.claude/settings.json` exists

## Skill Bundling Options

### Option A: Embed skill files in binary
Use `include_str!()` or `include_bytes!()` to embed skill markdown files at compile time:
```rust
const SKILL_MD: &str = include_str!("../claude/bt-tasks/SKILL.md");
const CLI_REFERENCE_MD: &str = include_str!("../claude/bt-tasks/references/CLI_REFERENCE.md");
// etc.
```

Pros: Single binary, always in sync
Cons: Binary size increases, need to rebuild to update skill

### Option B: Fetch from repo at runtime
Download skill files from GitHub on init.

Pros: Always latest version
Cons: Network dependency, version mismatch risk

### Option C: Separate install command
Add `bt install-skill` command that copies from a known location.

Pros: Explicit, user-controlled
Cons: Extra step for users

## Recommended: Option A (embedded)
Embed skill files in binary. On `bt init`:
1. Check for Claude Code indicators
2. If found, create `.claude/commands/bt-tasks/` in project
3. Write embedded skill files to that location
4. Print info message about skill installation

## File Structure
```
.claude/
└── commands/
    └── bt-tasks/
        ├── SKILL.md
        └── references/
            ├── CLI_REFERENCE.md
            ├── WORKFLOWS.md
            └── BOUNDARIES.md
```

## Questions
- Should we prompt user or auto-install silently?
- Should there be a `--no-skill` flag to skip?
- How to handle updates when skill already exists?

---
## Log

---
# Log: 2025-11-27T03:33:45Z Brian McCallister

Created task.
---
# Log: 2025-11-27T03:33:45Z Brian McCallister

KEY DECISIONS:
- Ask user before installing skill (polite UX)
- Add --no-skill flag to automatically decline
- Overwrite existing skill files on init (bt init doubles as upgrade mechanism)
